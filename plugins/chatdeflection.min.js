/*!
 * widgets
 * @version: 9.0.005.00
 * @license: Genesys Telecom Labs
 */
webpackJsonp([8],{"./node_modules/css-loader/index.js!./node_modules/less-loader/dist/cjs.js!./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less":function(e,t,n){t=e.exports=n("./node_modules/css-loader/lib/css-base.js")(!1),t.push([e.i,'.cx-kc-article-wrapper{height:100%}.cx-kc-article-wrapper+.cx-button-group{position:absolute;bottom:0;left:0;padding:5px 0 10px 20px;width:100%}.cx-kc-article-wrapper+.cx-button-group .btn-back{float:left}.cx-kc-article-wrapper .cx-scroll-wrapper{position:relative;overflow-y:auto;overflow-x:hidden}.cx-kc-article{font-size:13px}.cx-kc-article .gkc-doc-link{cursor:pointer}.cx-kc-article .cx-metadata{font-size:.85em;margin-bottom:10px}.cx-kc-article .cx-custom-fields{margin-top:10px;line-height:18px}.cx-kc-article .cx-kc-article-title{margin:0 0 24px;padding:0;height:auto!important;min-height:0;font-weight:700}.cx-kc-article .cx-kc-article-title .cx-icon{height:32px;width:24px;float:left}.cx-kc-article .cx-kc-article-title .cx-question-title{position:relative;left:8px}.cx-kc-article .cx-description{line-height:20px}.cx-kc-article .cx-description a{font-weight:700;cursor:pointer;text-decoration:none}.cx-kc-article .cx-description a:hover{text-decoration:none}.cx-kc-article .cx-description a .cx-icon-document-link{height:14px;width:14px;margin-right:3px;margin-top:2px;vertical-align:top;display:inline-block}.cx-kc-article .cx-description a .cx-icon-document-link svg path{fill:currentColor!important}.cx-kc-article .cx-attachments{margin-top:10px;margin-left:-3px;line-height:20px;overflow:hidden}.cx-kc-article .cx-attachments>div{margin:2px 3px}.cx-kc-article .cx-attachments a{font-weight:700;cursor:pointer;text-decoration:none}.cx-kc-article .cx-attachments a .cx-icon-document-attachment{height:16px;width:16px;margin-left:-4px;margin-right:8px;margin-bottom:2px;vertical-align:bottom;display:inline-block}.cx-kc-article .cx-attachments a:hover{text-decoration:none}.cx-kc-article .cx-attachments a:hover .cx-icon-document-attachment svg path,.cx-kc-article .cx-attachments a:hover .cx-icon-document-attachment svg polygon{fill:currentColor!important}.cx-kc-article .cx-feedback textarea{width:350px;resize:vertical}.cx-kc-article .cx-feedback .cx-vote-question{float:left}.cx-kc-article .cx-feedback .cx-vote-question.cx-disabled{opacity:.5}.cx-kc-article .cx-feedback .cx-vote-question a{text-decoration:none}.cx-kc-article .cx-feedback .cx-vote-question .btn{width:50px;padding:5px 0;margin-left:5px}.cx-kc-article .cx-feedback .cx-vote-question .btn-default{margin-left:13px}.cx-kc-article .cx-feedback:after{content:"";display:block;clear:both}.cx-kc-article .cx-feedback .cx-helpful{line-height:20px;padding-top:50px}.cx-kc-article .cx-feedback .cx-helpful span{display:block;font-size:13px;font-weight:700;padding:10px 0 20px}.cx-kc-article .cx-feedback .cx-publish-feedback{width:300px}.cx-kc-article .cx-feedback .cx-publish-feedback.cx-quiet{display:none}.cx-kc-article .cx-feedback .cx-publish-feedback .cx-star-rating span{font-size:16px;cursor:pointer}.cx-kc-article .cx-feedback .cx-publish-feedback .cx-publish-comment{margin-top:5px}.cx-kc-article .cx-feedback .cx-publish-feedback .cx-publish-comment textarea{width:100%}.cx-kc-article .cx-feedback .cx-publish-feedback .cx-publish-comment .cx-publish-comment-buttons{display:none;margin-top:7px;text-align:right}.cx-webchat .gkc-question{margin-top:10px}.cx-webchat .gkc-question a{display:list-item;margin-left:16px}.cx-webchat .gkc-question a:focus,.cx-webchat .gkc-question a:hover{text-decoration:none}.cx-mobile.cx-landscape .cx-kc-article .cx-kc-article-title .cx-question-title{width:inherit}.cx-mobile .cx-kc-article-wrapper+.cx-button-group{position:fixed}',""])},"./webapp/plugins/cx-chat-deflection/cx-chat-deflection-service.js":function(e,t,n){"use strict";var a,c;a=[],void 0!==(c=function(){return{getWelcomeMessage:function(e){return e.WelcomeMessage},handleCustomerQuery:function(e,t,n,a){return e.command(a+".search",{query:t,junkfree:!0,apiClientMediaType:n})}}}.apply(t,a))&&(e.exports=c)},"./webapp/plugins/cx-chat-deflection/cx-chat-deflection.js":function(e,t,n){"use strict";var a,c,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=[n("./webapp/lib/thirdparty/jquery-3.2.1.js"),n("./webapp/lib/thirdparty/micro-template.js"),n("./webapp/plugins/cx-common/cx-common.js"),n("./webapp/plugins/cx-chat-deflection/nls/string.js"),n("./webapp/plugins/cx-chat-deflection/cx-chat-deflection-service.js"),n("./webapp/plugins/cx-chat-deflection/html/deflected-document.html"),n("./webapp/plugins/cx-chat-deflection/html/bubble.html"),n("./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less")],void 0!==(c=function(e,t,n,a,c,s,r){function o(t){if(t.type&&("CustomNotice"===t.type||"Message"===t.type)&&t.text){var n=!1;try{var c=JSON.parse(t.text),s=!1;if("object"==(void 0===c?"undefined":i(c))&&c.key)switch(c.key){case I:s=!0,t.text=c.message,M=!0;break;case W:var r,o=c.documents,d=c.query;o&&o.length>0?(r=e("<span>").addClass("cx-message-text").text(a.SearchResult).get(0).outerHTML,o.forEach(function(t){var n=e("<a>").addClass("cx-gkc-question-link").attr("href","javascript:;").attr("data-id",t.id).attr("data-kbid",t.kbId).attr("data-query",d).attr("search-id",c.searchId).text(t.question||t.title);r+=e("<div>").addClass("gkc-question").append(n).get(0).outerHTML})):r=e("<span>").addClass("cx-message-text").text(a.NoDocumentsFound).get(0).outerHTML,s=!0,t.text=r,t.html=!0;break;case H:var l,p=c.document,u=H;if(n=!0,!p)return;if(l=e("<div>"),v.enabled){var g=e("<span>").text(a.SuggestedMessage).addClass("cx-message-text"),x=e("<a>").addClass("cx-gkc-question-link").attr("href","javascript:;").attr("data-id",p.id).attr("data-kbid",p.kbId).attr("data-key",u).text(p.question||p.title),b=e("<span>").text(" ("+a.OpenDocumentHint+")").addClass("cx-message-text");l.append(g,x,b)}else{var f=e("<span>").text(a.SuggestedDocumentMessage.replace("<%DocTitle%>",p.question||p.title));l.append(f)}s=!0,t.text=l,t.html=!0}if(s)return t.from.type="Agent",t.type="Message",t.messageType="text",n||(t.from.nickname=a.KnowledgeAgentName,t.bubble={direction:"left",time:!0,name:!0,avatar:{icon:"knowledge-center"}}),t}catch(e){return}}}function d(e){e.sessionId&&(w[v.workspace.sessionKey]=e.sessionId),e.language&&(w[v.workspace.languageKey]=e.language)}function l(e){c.handleCustomerQuery(y,e,v.apiClientMediaType,E).done(function(t){var n=t.query?t.documents.map(function(e){return{id:e.id,kbId:e.kbId,question:e.question||e.title}}):[];if(p({key:W,query:e,searchId:t.searchId,documents:n}),v.reporting.enabled||v.workspace.enabled){var a={};if(v.reporting.enabled){var a={};a[v.reporting.deflectionSearchedKey]=!0}v.workspace.enabled&&(a[v.workspace.questionKey]=e),y.command("WebChatService.updateUserData",a)}_++})}function p(e){if(!v.enabled)return void console.log("ChatDeflection is disabled");y.command("WebChatService.sendCustomNotice",{message:JSON.stringify(e)}),"readable"===v.agentTranscript&&u(e)}function u(e){var t={};switch(e.key){case W:var n=e.documents;t.data=e.query,t.template=a.SearchMessage,t.placeholder="<%SearchQuery%>",t.documents=n;break;case K:t.data=e.question,t.template=a.OpenMessage,t.placeholder="<%OpenQuery%>";break;case A:t.data=e.question,t.template=a.VisitMessage,t.placeholder="<%VisitQuery%>";break;case T:t.data=e.question,t.template=a.UnansweredMessage,t.placeholder="<%UnansweredQuery%>";break;case N:t.data=e.question,t.template=a.AnsweredMessage,t.placeholder="<%AnsweredQuery%>";break;case D:t.data=e.question,e.relevant?t.template=a.PositiveVoteMessage:t.template=a.NegativeVoteMessage,t.placeholder="<%VoteQuery%>"}if(t.data){var c;c=t.template&&t.placeholder?a.TranscriptMarker+t.template.replace(t.placeholder,t.data):"object"===i(t.data)?a.TranscriptMarker+JSON.stringify(t.data):a.TranscriptMarker+t.data,t.documents&&t.documents.forEach(function(e){c+=" • "+e.question||e.title}),y.command("WebChatService.sendMessage",{message:c})}}function g(t){t.data.html.find(".cx-gkc-question-link").on("mousedown",function(t){var n=e(this),a=n.attr("data-id"),c=n.attr("data-kbid"),i=n.attr("data-query"),s=n.attr("data-key"),r=n.attr("search-id");if(p({key:s?K:A,docId:a,kbId:c,query:i,question:n.text()}),v.reporting.enabled){var o={};o[v.reporting.deflectionOpenedKey]=JSON.stringify({docId:a,kbId:c}),y.command("WebChatService.updateUserData",o)}x(a,c,i,r),Q.docId=a,Q.kbId=c})}function x(c,i,r,o){y.command(E+".getFullContent",{kbId:i,docId:c}).done(function(c){O=e(t(s,{document:c,query:r})),n.populateLanguageStrings(O,a);var d=c.question||c.title,l=O.find(".cx-kc-article"),u=O.find(".cx-feedback"),g=e('<span class="cx-icon-document-link"></span>');g.html(n.Generate.Icon("outbound")),O.find(".cx-description > a").prepend(g),n.populateIcons(O),O.find(".gkc-doc-link").on("click",function(){x(this.getAttribute("data-docid"),this.getAttribute("data-kbid"),null)}),l.find(".cx-vote-question a").on("click",function(t){var n=e(this),s=document.getElementById("relevant"),d=e(".cx-helpful"),g="<span></span>";u.find(".cx-vote-question").addClass("cx-disabled"),u.find(".cx-vote-question a .cx-btn").unwrap().attr("disabled","disabled"),"EITHER"===c.feedbackType&&t.target==s?(d.append(a.ArticleHelpfulnessYes).wrapInner(g),d.append(a.ArticleHelpfulnessYesDesc)):(d.append(a.ArticleHelpfulnessNo).wrapInner(g),d.append(a.ArticleHelpfulnessNoDesc)),h(null,!0),m(l);var x={docId:c.id,kbId:i,searchId:o,query:r||c.question||c.title,relevant:n.data("relevant")};if(y.command(E+".vote",x),p(e.extend({key:D,question:c.question||c.title||r},x)),v.reporting.enabled){var b={};b[v.reporting.deflectionLastFeedbackKey]=n.data("relevant"),y.command("WebChatService.updateUserData",b)}}),O.find(".cx-btn-back").on("click",function(){y.command("WebChat.hideOverlay"),null===r&&x(Q.docId,Q.kbId,{})}),b(d,O)})}function b(e,t){y.command("WebChat.showOverlay",{html:t,hideFooter:!0}).done(function(){k(),h(!0)})}function f(){if(!v.enabled)return void n.log("ChatDeflection is disabled");y.command("WebChatService.sendCustomNotice",{message:JSON.stringify({key:I,message:c.getWelcomeMessage(a)})}),y.publish("started"),C=!0;var t={};v.reporting.enabled&&(t[v.reporting.deflectionStartedKey]=!0),v.workspace.enabled&&e.extend(t,w),e.isEmptyObject(t)||y.command("WebChatService.updateUserData",t)}function m(e){return e.stop().animate({scrollTop:e.get(0).scrollHeight},500)}function h(e,t){var n=O.find(".cx-scroll-wrapper");n&&(e&&n.animate({scrollTop:0}),t&&n.animate({scrollTop:n[0].scrollHeight},"300","swing"))}function k(){var e=O.find(".cx-button-group").outerHeight(),t=O.outerHeight();O.find(".cx-scroll-wrapper").height(t-e)}var v={enabled:!1,agentTranscript:"readable",workspace:{enabled:!0,sessionKey:"gks_session",languageKey:"gks_lang",countryKey:"Country",questionKey:"gks_question",knowledgeBaseKey:"gks_kbid",customerIdKey:"EmailAddress"},reporting:{enabled:!0,deflectionStartedKey:"gks_deflection_started",deflectionSearchedKey:"gks_deflection_searched",deflectionLastFeedbackKey:"gks_deflection_last_feedback",deflectionOpenedKey:"gks_deflection_document_opened"}},y=CXBus.registerPlugin("ChatDeflection"),w={},q=!1,C=!1,S=!1,M=!1,j=!1,_=0,I="gkc_welcome",W="gkc_search",A="gkc_visit",T="gkc_unanswered",N="gkc_answered",D="gkc_vote",H="gkc_suggested",K="gkc_open",E="KnowledgeCenterService",O=e(),Q={};y&&(y.registerEvents(["ready","started","ended","enabled","disabled"]),y.registerCommand("configure",function(t){if(t&&t.data){if(v=e.extend(!0,{},v,t.data),_genesys.widgets.knowledgecenter.servicePlugin){var n=_genesys.widgets.knowledgecenter.servicePlugin;"string"==typeof n&&(E=n)}t.deferred.resolve()}else t.deferred.reject("Deflection is not configured")}),y.registerCommand("enable",function(e){v.enabled?e.deferred.reject("Deflection is enabled already"):(v.enabled=!0,y.publish("enabled"),M||!S||j||(f(),C=!0),e.deferred.resolve())}),y.registerCommand("disable",function(e){v.enabled?(v.enabled=!1,y.publish("disabled"),C=!1,e.deferred.resolve()):e.deferred.reject("Deflection is disabled already")}),y.subscribe(E+".ready",function(){y.command(E+".sessionInfo").done(function(e){d(e)})}),y.subscribe(E+".sessionChanged",function(t){if(d(t.data||{}),C){var n={};e.extend(n,w),e.isEmptyObject(n)||y.command("WebChatService.updateUserData",n)}}),y.subscribe("WebChatService.ready",function(){y.command("WebChatService.registerPreProcessor",{preprocessor:o})}),y.subscribe("WebChatService.started",function(){y.command("WebChatService.addPrefilter",{filters:[new RegExp(a.TranscriptMarker),new RegExp(a.SuggestedMarker)]})}),y.subscribe("WebChatService.restored",function(){y.command("WebChatService.addPrefilter",{filters:[new RegExp(a.TranscriptMarker),new RegExp(a.SuggestedMarker)]})}),y.subscribe("WebChat.messageAdded",function(e){g(e)}),y.subscribe("WebChatService.clientDisconnected",function(e){S=!1}),y.subscribe("WebChatService.clientConnected",function(e){S=!0,!j&&e.data&&e.data.message&&!e.data.message.restoring&&f()}),y.subscribe("WebChatService.messageReceived",function(e){v.enabled&&(e.data.messages||[]).forEach(function(e){j||"Message"!==e.type||"Client"!==e.from.type||e.restoring||l(e.text)})}),y.subscribe("WebChatService.agentConnected",function(){C&&(y.publish("ended"),C=!1),j=!0}),y.subscribe("WebChat.closed",function(){j=!1,C&&(y.publish("ended"),C=!1)}),y.subscribe("App.mobileMode",function(){e(window).on("orientationchange",k),e(window).on("resize",k),q=!0}),y.subscribe("App.i18n",function(t){"object"==i(t.data.knowledgecenter)&&e.extend(a,t.data.knowledgecenter)}),y.subscribe("App.ready",function(){y.command("App.registerI18n",{i18n:a,namespace:"knowledgecenter",lang:"en"}).always(function(){_genesys.widgets.knowledgecenter&&y.command("configure",_genesys.widgets.knowledgecenter.deflection),y.ready(),y.republish("ready")})}))}.apply(t,a))&&(e.exports=c)},"./webapp/plugins/cx-chat-deflection/html/bubble.html":function(e,t){e.exports='<div style="display: block;" class="cx-message cx-them cx-Agent cx-NewTextBubble">\r\n\r\n    <div class="cx-avatar-wrapper">\r\n        <div class="cx-avatar cx-icon" data-icon="knowledge-center"></div>\r\n    </div>\r\n\r\n    <div class="cx-bubble-arrow">\r\n        <svg height="7" width="7">\r\n            <polygon class="cx-left" points="0,0 7,0 7,7"></polygon>\r\n            <polygon class="cx-right" points="0,0 0,7 7,0"></polygon>\r\n        </svg>\r\n    </div>\r\n\r\n    <div class="cx-bubble">\r\n        <span class="cx-name"><%= name %></span>\r\n        <%=raw reply %>\r\n        <span class="cx-time"><%= time %></span>\r\n    </div>\r\n\r\n</div>'},"./webapp/plugins/cx-chat-deflection/html/deflected-document.html":function(e,t){e.exports='<div class="cx-kc-article-wrapper">\r\n\r\n    <div class="cx-scroll-wrapper">\r\n\r\n        <div class="cx-kc-article">\r\n\r\n            <div class="cx-kc-article-title">\r\n                <div class="cx-icon" data-icon="knowledge-center"></div>\r\n                <div class="cx-question-title"><%=raw document.question || document.title %></div>\r\n            </div>\r\n\r\n            <div class="cx-description">\r\n                <%=raw document.answerContent || document.descriptionContent %>\r\n            </div>\r\n\r\n            <% if (document.attachments && document.attachments.length > 0) { %>\r\n            <div class="cx-attachments">\r\n                <% document.attachments.forEach(function(item) { %>\r\n                <div>\r\n                    <a href="<%= item.url %>" target="_blank">\r\n                        <div class="cx-icon cx-icon-document-attachment cx-theme-icon-interactive1" data-icon="doc-generic-solid"></div><%= item.fileName %>\r\n                    </a>\r\n                </div>\r\n                <% }.bind(this)) %>\r\n            </div>\r\n            <% } %>\r\n\r\n            <% if (document.feedbackType !== \'NONE\') { %>\r\n            <div class="cx-feedback">\r\n\r\n                <% if (query && (document.feedbackType === \'EITHER\' || document.feedbackType === \'VOTE\')) { %>\r\n                <div class="cx-vote-question">\r\n                    <span class="i18n" data-message="FeedbackQuestion"></span>\r\n                    <a href="javascript:;" data-relevant="false"><button class="i18n cx-btn cx-btn-default" type="button" id="irrelevant" data-message="FeedbackDecline"></button></a>\r\n                    <a href="javascript:;" data-relevant="true"><button class="i18n cx-btn cx-btn-primary" type="button" id="relevant" data-message="FeedbackAccept"></button></a>\r\n                </div>\r\n                <% } %>\r\n\r\n                <div class="cx-helpful"></div>\r\n            </div>\r\n            <% } %>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div class="cx-button-group cx-buttons-binary cx-button-back-container">\r\n        <button class="i18n cx-btn cx-btn-primary cx-btn-back" data-message="Back"></button>\r\n    </div>\r\n</div>\r\n\r\n'},"./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less":function(e,t,n){var a=n("./node_modules/css-loader/index.js!./node_modules/less-loader/dist/cjs.js!./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less");"string"==typeof a&&(a=[[e.i,a,""]]);var c={};c.transform=void 0;var i=n("./node_modules/style-loader/lib/addStyles.js")(a,c);a.locals&&(e.exports=a.locals),a.locals||e.hot.accept("./node_modules/css-loader/index.js!./node_modules/less-loader/dist/cjs.js!./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less",function(){var t=n("./node_modules/css-loader/index.js!./node_modules/less-loader/dist/cjs.js!./webapp/plugins/cx-chat-deflection/less/cx-knowledge-center.less");"string"==typeof t&&(t=[[e.i,t,""]]),i(t)}),e.hot.dispose(function(){i()})},"./webapp/plugins/cx-chat-deflection/nls/string.js":function(e,t,n){"use strict";e.exports={KnowledgeAgentName:"Knowledge Center",WelcomeMessage:"Hello and Welcome! A Live agent will be with you shortly. In the meantime, can I assist you with any questions you may have? Please type a question into the input field below.",SearchResult:"While waiting for an Agent to connect, here are the most relevant answers to your query:",NoDocumentsFound:"I'm sorry. No articles matched your question. Would you like to ask another question?",SuggestedMessage:"The following Knowledge item has been suggested:",OpenDocumentHint:"click on it to view its content",SuggestedDocumentMessage:'The document "<%DocTitle%>" has been suggested',Yes:"Yes",No:"No",Back:"Back",FeedbackQuestion:"Was this helpful?",FeedbackAccept:"Yes",FeedbackDecline:"No",ArticleHelpfulnessYes:'Article Helpfulness - "Yes"',ArticleHelpfulnessYesDesc:"Great! We're very pleased to hear that the article assisted you in your search. Have a great day!",ArticleHelpfulnessNo:'Article Helpfulness - "No"',ArticleHelpfulnessNoDesc:"We're sorry that the article wasn't a good match for your search. We thank you for your feedback!",TranscriptMarker:"KnowledgeCenter: ",SearchMessage:'Search with query "<%SearchQuery%>"↲',VisitMessage:'Visit for document "<%VisitQuery%>"',OpenMessage:'Viewed "<%OpenQuery%>"',AnsweredMessage:'Results for query "<%AnsweredQuery%>" have been marked as relevant.',UnansweredMessage:'Results for query "<%UnansweredQuery%>" have been marked as unanswered.',PositiveVoteMessage:'Positive voting for document "<%VoteQuery%>"',NegativeVoteMessage:'Negative voting for document "<%VoteQuery%>"',SuggestedMarker:"The document[^\0]*?has been suggested"}}},["./webapp/plugins/cx-chat-deflection/cx-chat-deflection.js"]);