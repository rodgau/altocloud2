/*!
 * widgets
 * @version: 9.0.005.00
 * @license: Genesys Telecom Labs
 */
webpackJsonp([23],{"./webapp/plugins/cx-buster/cx-buster.js":function(e,t,r){"use strict";var o,n,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=[r("./webapp/lib/thirdparty/jquery-3.2.1.js"),r("./webapp/plugins/cx-common/cx-common.js"),r("./webapp/lib/thirdparty/js.cookie.js"),r("./webapp/lib/thirdparty/URI.js")],void 0!==(n=function(e,t,r,o){var n=CXBus.registerPlugin("Buster");if(n){var i=(o(window.location.href).domain(),JSON.stringify,r.get,r.remove,{command:n.command,publish:n.publish,republish:n.republish}),d=function(e){console.debug(e)},a="",u={},l=[],c=0,m=-1,p=0,f=!1,b=!1,g=0,y=!1,v={},T=!1,h=!1,j=!0,x=!0,C=1e3,S=100,w=800;n.registerCommand("configure",function(t){if(t.data){var r=t.data;"object"==(void 0===r?"undefined":s(r))&&("boolean"==typeof r.online&&(j=r.online),"number"==typeof r.stopOnFailedTest&&(x=r.stopOnFailedTest),"number"==typeof r.globalStepTimeout&&(C=r.globalStepTimeout),"number"==typeof r.globalStepWait&&(S=r.globalStepWait),"number"==typeof r.globalTestWait&&(w=r.globalTestWait),"string"==typeof r.testFolder&&(a=r.testFolder),r.modules&&r.modules.length>0&&e.each(r.modules,function(e,t){n.command("fetchTestModule",{module:t})})),t.deferred.resolve()}else t.deferred.reject("Invalid configuration")}),n.registerCommand("start",function(e){var t=e.data;"boolean"==typeof t.online&&(j=t.online),"number"==typeof t.stopOnFailedTest&&(x=t.stopOnFailedTest),"string"==typeof t.globalStepTimeout&&(C=t.globalStepTimeout),"string"==typeof t.globalStepWait&&(S=t.globalStepWait),"string"==typeof t.globalTestWait&&(w=t.globalTestWait),k(),n.publish("started"),e.deferred.resolve()}),n.registerCommand("stop",function(e){R(),n.publish("stopped"),e.deferred.resolve()}),n.registerCommand("complete",function(e){v.pass=!0,n.republish("completed",v),R(),e.deferred.resolve()}),n.registerCommand("registerTests",function(t){var r=t.data;r.module&&(clearTimeout(u[r.module].timeout),r.tests?(u[r.module].loaded=!0,u[r.module].tests=r.tests):r.group&&e.each(r.group,function(e,t){n.command("fetchTestModule",{module:t})})),W(),t.deferred.resolve()}),n.registerCommand("fetchTestModule",function(e){if(e.data.module){u[e.data.module]={loaded:!1,tests:[],timeout:setTimeout(function(){u[e.data.module].loaded="timeout",W()},3e3)},l.push(e.data.module);var t=document.createElement("script");t.type="text/javascript",t.src=a+"/"+e.data.module+".tests.js",document.head.appendChild(t)}});var W=function(){var e=!0;for(var t in u)!0!==u[t].loaded&&(e=!1);return e&&(n.publish("allTestsLoaded"),console.log("allTestsLoaded")),e},I=function(){T||(y=u[l[c]]&&u[l[c]].tests[m],y?y.online&&!j?(E("skipped","Online tests are disabled"),k()):p==y.steps.length?(E("pass"),k()):(f=l[c],b=y.name,!0===y.online&&!1===j?(E("skipped","Online tests are currently disabled"),k()):n.command("runNextStep").done(function(e){O()}).fail(function(e){E("failed",e),x?n.command("stop"):k()})):u[l[c]]&&!u[l[c]].tests[m+1]&&u[l[c+1]]&&u[l[c+1]].tests[0]?(d(l[c+1]),F()):!u[l[c]]||u[l[c]].tests[m+1]||u[l[c+1]]||(T=!0,n.command("complete")))},O=function(){T||setTimeout(function(){p++,I()},S)},k=function(){T||setTimeout(function(){T||(m++,p=0,I(),y&&d("Running Test: "+y.name))},w)},F=function(){T||(c++,m=0,p=0,I())},R=function(){d("---- All Tests Passed ("+g+" skipped) ----"),T=!0,d(v),N()},M=function(e){d('---- "'+b+'" failed at step #'+(p+1)+' due to "'+e+'". Aborting. ----'),T=!0,d(v),v.pass=!1,n.republish("completed",v),N()},E=function(t,r){v[f]||(v[f]={}),v[f][b]=e.extend(v[f][b]||{},{name:b,result:t,step:p,desc:r}),v[f][b],d("-- "+t+(r?" ("+r+")":"")),n.republish("testComplete",v[f][b]),"skipped"==t&&g++,"failed"==t&&M(r)},N=function(){c=0,m=-1,p=0,f=!1,b=!1,y=!1,v={},T=!1,h=!1,g=0};n.registerCommand("runNextStep",function(r){var o=y&&y.steps[p],s=!1;o?("command"==o.type?s=n.command("testCommand",o):"subscribe"==o.type?s=n.command("testEvent",o):"wait"==o.type&&(s=n.command("wait",o)),s?s.done(function(e){r.deferred.resolve(e||{})}).fail(function(e){r.deferred.reject(e||{})}):"function"==typeof o?o(e,i,t)?r.deferred.resolve():r.deferred.reject("function test failed"):r.deferred.reject("Invalid Testing Step Type: "+o.type)):k()}),n.registerCommand("testCommand",function(r){var o=r.data,s=setTimeout(function(){o.trigger?"function"==typeof o.trigger&&o.trigger(e,i,t):r.deferred.reject("timeout")},parseInt(o.timeout)||C);n.command(o.name,o.options||{}).done(function(e){clearTimeout(s),"resolved"==o.result?(o.returns&&e!=o.returns&&r.deferred.reject("Returned data is not as expected"),r.deferred.resolve()):"rejected"==o.result&&r.deferred.reject("Did not reject as expected")}).fail(function(e){clearTimeout(s),"rejected"==o.result?o.returns&&e!=o.returns?r.deferred.reject("Returned data is not as expected"):r.deferred.resolve():"resolved"==o.result&&r.deferred.reject("Did not resolve as expected")})}),n.registerCommand("testEvent",function(r){var o=r.data,s=setTimeout(function(){r.deferred.reject("timeout")},parseInt(o.timeout)||C);if(n.subscribe(o.name,function(e){clearTimeout(s),o.returns&&e!=o.returns?r.deferred.reject("Returned data is not as expected"):r.deferred.resolve(),n.unsubscribe(e.event)}),o.trigger){var d=o.trigger.type||!1;"command"==d?n.command(o.trigger.name,o.trigger.options):"event"==d?n.publish(o.trigger.name):"function"==typeof o.trigger&&o.trigger(e,i,t)}}),n.registerCommand("testUnsubscribe",function(e){var t=e.data;n.unsubscribe(t.name)?t.returns&&e1!=t.returns?e.deferred.reject("Returned data is not as expected"):e.deferred.resolve():e.deferred.resolve("Could not succussfully unsubscribe from: "+t.name)}),n.registerCommand("wait",function(e){parseInt(e.data.time)>=1?setTimeout(function(){e.deferred.resolve()},e.data.time):e.deferred.reject("Invalid wait time specified. Must be equal to, or greater than, 1 millisecond.")}),n.command("configure",_genesys.widgets.buster),n.ready(),n.republish("ready")}}.apply(t,o))&&(e.exports=n)}},["./webapp/plugins/cx-buster/cx-buster.js"]);